{% extends "base.html" %}

{% block content %}
<div class="mb-6">
    <a href="{{ url_for('index') }}" class="text-[#1db954] hover:text-green-400 transition-colors">
        <i class="fas fa-arrow-left mr-2"></i>Back to Dashboard
    </a>
</div>

<div class="bg-[#191414] rounded-lg p-6 mb-6">
    <div class="flex items-center space-x-6">
        <div class="w-32 h-32 bg-gradient-to-br from-[#1db954] to-green-600 rounded-lg flex items-center justify-center">
            <i class="fas fa-heart text-4xl text-white"></i>
        </div>
        
        <div class="flex-1">
            <h1 class="text-3xl font-bold mb-2">Liked Songs</h1>
            <p class="text-[#b3b3b3] mb-3">Your personal collection of liked tracks</p>
            <div class="flex items-center space-x-4 text-sm text-[#b3b3b3]">
                <span><i class="fas fa-music mr-1"></i>{{ liked_songs|length }} tracks</span>
            </div>
        </div>
    </div>
</div>

<div class="bg-[#191414] rounded-lg p-6">
    <h2 class="text-xl font-bold mb-4">Your Liked Songs</h2>
    
    {% if liked_songs %}
        <div class="space-y-2">
            {% for item in liked_songs %}
                {% set track = item.track %}
                {% if track and track.name and track.name.strip() %}
                <div class="flex items-center p-3 rounded-lg hover:bg-[#535353] transition-colors group">
                    <div class="w-8 text-[#b3b3b3] text-sm">{{ loop.index }}</div>
                    
                    {% if track.album.images and track.album.images|length > 0 %}
                        <img src="{{ track.album.images[-1].url }}" alt="{{ track.name }}" 
                             class="w-12 h-12 rounded mr-4">
                    {% else %}
                        <div class="w-12 h-12 bg-[#535353] rounded mr-4 flex items-center justify-center">
                            <i class="fas fa-music text-[#b3b3b3]"></i>
                        </div>
                    {% endif %}
                    
                    <div class="flex-1">
                        <div class="font-medium">{{ track.name }}</div>
                        <div class="text-sm text-[#b3b3b3]">
                            {{ track.artists[0].name if track.artists else 'Unknown Artist' }}{% if track.artists and track.artists|length > 1 %} + {{ track.artists|length - 1 }} more{% endif %}
                        </div>
                        {% if track.artists and track.artists[0] %}
                            {% set artist_genres = track.artists[0].get('genres', []) %}
                            {% if artist_genres %}
                                <div class="flex flex-wrap gap-1 mt-1">
                                    {% for genre in artist_genres[:2] %}
                                        <span class="bg-[#1db954] text-white px-2 py-1 rounded text-xs">{{ genre }}</span>
                                    {% endfor %}
                                </div>
                            {% endif %}
                        {% endif %}
                    </div>
                    
                    <div class="text-sm text-[#b3b3b3] mr-4">{{ track.album.name }}</div>
                    
                    <div class="text-sm text-[#b3b3b3] mr-4">
                        Added {{ item.added_at[:10] if item.added_at else 'Unknown' }}
                    </div>
                    
                    <div class="text-sm text-[#b3b3b3]">
                        {% if track.duration_ms %}
                            {{ '%d:%02d'|format((track.duration_ms / 60000)|int, ((track.duration_ms % 60000) / 1000)|int) }}
                        {% endif %}
                    </div>
                </div>
                {% endif %}
            {% endfor %}
        </div>
    {% else %}
        <div class="text-center py-12">
            <i class="fas fa-heart text-4xl text-[#535353] mb-4"></i>
            <p class="text-[#b3b3b3]">No liked songs found</p>
            <p class="text-sm text-[#b3b3b3] mt-2">Start liking songs on Spotify to see them here!</p>
        </div>
    {% endif %}
</div>
{% endblock %}

{% block scripts %}
<script>
</script>
{% endblock %}
